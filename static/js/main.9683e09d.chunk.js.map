{"version":3,"sources":["styles/GlobalStyles.js","components/organisms/footer/footer.component.jsx","components/templates/app.template.jsx","components/atoms/utility/container.component.jsx","components/organisms/secret-card/secret-card.component.jsx","components/organisms/secrets-list/secrets-list.component.jsx","components/organisms/secret-form/form-input/form-input.component.jsx","components/atoms/button.component.jsx","components/organisms/secret-form/secret-form.component.jsx","firebase/firebase.core.js","services/secrets/secrets.service.js","services/secrets/secrets.context.jsx","pages/secrets.page.jsx","App.js","index.js"],"names":["CustomStyles","createGlobalStyle","GlobalStyles","Footer","href","rel","target","fill","viewBox","d","stroke","xmlns","cx","cy","r","AppContainer","tw","div","AppTemplateWrapper","AppContent","AppTemplate","children","Container","override","SecretCard","secret","text","createdOn","author","src","alt","format","Date","SecretsList","secrets","length","map","id","FieldWrapper","TextLabel","label","TextField","input","FormInput","handleChange","otherProps","Button","isLoading","onClick","console","log","disabled","SecretForm","onSubmit","isSubmitting","useState","formData","setFormData","event","name","value","previous","preventDefault","alert","type","onChange","required","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firestore","COLLECTION_NAME","getSecretsRequest","a","collection","get","snapshots","docs","doc","data","transformSecret","secretText","addSecretRequest","toISOString","add","ref","SecretsContext","createContext","SecretsContextProvider","setSecrets","inProgress","setInProgress","error","setError","loadRequests","then","loadedSecrets","transformedSecrets","catch","err","toString","finally","useEffect","previousSecrets","sort","createdOn1","createdOn2","compareDesc","addSecret","secretToAdd","Provider","Secrets","useContext","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9683e09d.chunk.js","sourcesContent":["import { createGlobalStyle } from 'styled-components'\nimport tw, { theme, GlobalStyles as BaseStyles } from 'twin.macro'\n\nconst CustomStyles = createGlobalStyle`\n  body {\n    -webkit-tap-highlight-color: ${theme`colors.purple.500`};\n    ${tw`font-poppins`}\n    ${tw`antialiased`}\n  }\n`\n\nconst GlobalStyles = () => (\n  <>\n    <BaseStyles />\n    <CustomStyles />\n  </>\n)\n\nexport default GlobalStyles\n","import 'twin.macro'\nimport React from 'react'\nimport { ArchiveIcon } from '@heroicons/react/solid'\n\nexport const Footer = () => {\n  return (\n    <footer tw=\"text-gray-600 font-poppins\">\n      <div tw=\"container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col\">\n        <a\n          href=\"https://qasim9872.github.io/my-secrets-jar\"\n          tw=\"flex font-rubik font-medium items-center md:justify-start justify-center text-gray-900\"\n        >\n          <ArchiveIcon tw=\"w-8 h-8\" />\n          <span tw=\"ml-3 text-xl\">My Secrets Jar</span>\n        </a>\n\n        <p tw=\"text-sm text-gray-500 sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4\">\n          Â© 2021\n          <a\n            href=\"https://github.com/qasim9872\"\n            tw=\"text-gray-600 ml-1\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            - Muhammad Qasim\n          </a>\n        </p>\n\n        <span tw=\"inline-flex sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start\">\n          <a tw=\"ml-3 text-gray-500\" href=\"https://twitter.com/Qasim9872\">\n            <svg\n              fill=\"currentColor\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"2\"\n              tw=\"w-5 h-5\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path d=\"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z\"></path>\n            </svg>\n          </a>\n\n          <a tw=\"ml-3\" href=\"https://github.com/qasim9872\">\n            <svg\n              fill=\"currentColor\"\n              stroke=\"currentColor\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"0\"\n              tw=\"w-5 h-5\"\n              viewBox=\"0 0 24 24\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <title>GitHub</title>\n              <path d=\"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12\" />\n            </svg>\n          </a>\n\n          <a\n            tw=\"ml-3 text-gray-500\"\n            href=\"https://www.linkedin.com/in/qasim9872/\"\n          >\n            <svg\n              fill=\"currentColor\"\n              stroke=\"currentColor\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n              stroke-width=\"0\"\n              tw=\"w-5 h-5\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                stroke=\"none\"\n                d=\"M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z\"\n              ></path>\n              <circle cx=\"4\" cy=\"4\" r=\"2\" stroke=\"none\"></circle>\n            </svg>\n          </a>\n        </span>\n      </div>\n    </footer>\n  )\n}\n","import React from 'react'\nimport tw from 'twin.macro'\n\nimport { Footer } from '../organisms/footer/footer.component'\n\nconst AppContainer = tw.div`flex min-h-screen min-w-full bg-blue-100 justify-center`\nconst AppTemplateWrapper = tw.div`container flex flex-col`\nconst AppContent = tw.div`flex flex-grow space-y-6`\n\nexport const AppTemplate = ({ children }) => {\n  return (\n    <AppContainer>\n      <AppTemplateWrapper>\n        <AppContent>{children}</AppContent>\n\n        <Footer />\n      </AppTemplateWrapper>\n    </AppContainer>\n  )\n}\n","import 'twin.macro'\nimport React from 'react'\n\nexport const Container = ({ children, override }) => (\n  <div tw=\"flex flex-grow justify-center items-center\" css={override}>\n    {children}\n  </div>\n)\n","import 'twin.macro'\nimport React from 'react'\nimport { format } from 'date-fns'\n\nexport const SecretCard = ({ secret }) => {\n  const { text, createdOn } = secret\n  const author = secret.author || 'Anonymous'\n\n  return (\n    <div tw=\"flex bg-white shadow-lg rounded-lg mx-4 w-full max-w-md md:mx-auto md:max-w-2xl \">\n      <div tw=\"flex flex-grow items-start px-4 py-6\">\n        <img\n          tw=\"w-12 h-12 rounded-full object-cover mr-4 shadow\"\n          src={`https://robohash.org/${author}?set=set2&size=180x180`}\n          alt=\"avatar\"\n        />\n\n        <div tw=\"w-full\">\n          <div tw=\"flex items-center justify-between\">\n            <h2 tw=\"text-lg font-semibold text-gray-900 -mt-1\">{author}</h2>\n            <small tw=\"text-sm text-gray-700\">\n              {format(new Date(createdOn), 'h:m aa - d MMM yy')}\n            </small>\n          </div>\n\n          <p tw=\"mt-3 text-gray-700 text-sm\">{text}</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import 'twin.macro'\nimport React from 'react'\nimport { SecretCard } from '../secret-card/secret-card.component'\n\nexport const SecretsList = ({ secrets = [] }) => {\n  return (\n    <div tw=\"flex w-full flex-col space-y-8 py-8 items-center\">\n      {secrets.length === 0 && (\n        <>\n          <h1 tw=\"text-4xl font-rubik text-red-400\">No Secrets Available</h1>\n          <h2 tw=\"text-xl font-rubik text-red-600\">Whisper yours now!</h2>\n        </>\n      )}\n\n      {secrets.map(secret => (\n        <SecretCard key={secret.id} secret={secret} />\n      ))}\n    </div>\n  )\n}\n","import tw from 'twin.macro'\nimport React from 'react'\n\nconst FieldWrapper = tw.div`relative`\nconst TextLabel = tw.label`leading-7 text-sm text-gray-600`\nconst TextField = tw.input`w-full bg-gray-100 bg-opacity-50 rounded border border-gray-300 focus:border-indigo-500 focus:bg-white focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out`\n\nexport const FormInput = ({ handleChange, label, ...otherProps }) => {\n  return (\n    <FieldWrapper>\n      {label ? <TextLabel>{label}</TextLabel> : null}\n      <TextField {...otherProps} />\n    </FieldWrapper>\n  )\n}\n","import React from 'react'\nimport tw from 'twin.macro'\n\nexport const Button = ({ children, isLoading, onClick, override }) => {\n  console.log(`is loading is ${isLoading}`)\n\n  return (\n    <div tw=\"px-2 flex flex-grow items-end justify-center\">\n      <button\n        onClick={onClick}\n        css={[\n          override,\n          isLoading ? tw` bg-gray-400` : tw`bg-indigo-500 hover:bg-indigo-600 `,\n        ]}\n        disabled={isLoading}\n        tw=\"flex mx-auto text-white border-0 py-1 px-8 focus:outline-none rounded text-lg\"\n      >\n        {children}\n      </button>\n    </div>\n  )\n}\n","import tw from 'twin.macro'\nimport React, { useState } from 'react'\n\nimport { FormInput } from './form-input/form-input.component'\nimport { Button } from '../../atoms/button.component'\n\nexport const SecretForm = ({ onSubmit, isSubmitting }) => {\n  const [formData, setFormData] = useState({ secret: '', author: '' })\n\n  const handleChange = event => {\n    const { name, value } = event.target\n    setFormData(previous => ({ ...previous, [name]: value }))\n  }\n\n  const resetForm = () => {\n    setFormData({ secret: '', author: '' })\n  }\n\n  const onSubmitForm = event => {\n    event.preventDefault()\n\n    if (!formData.secret) {\n      alert('secret is required')\n      return\n    }\n\n    resetForm()\n    onSubmit(formData)\n  }\n\n  return (\n    <form\n      tw=\"mt-4 flex flex-col space-y-2 p-4 border-2 border-black\"\n      onSubmit={onSubmitForm}\n    >\n      <div tw=\"flex flex-row space-x-4\">\n        <FormInput\n          name=\"secret\"\n          label=\"secret\"\n          type=\"text\"\n          value={formData.secret}\n          onChange={handleChange}\n          required\n        />\n\n        <FormInput\n          name=\"author\"\n          label=\"author\"\n          type=\"text\"\n          value={formData.author}\n          onChange={handleChange}\n        />\n      </div>\n\n      <Button\n        isLoading={isSubmitting}\n        override={tw`w-full px-0 justify-center items-center`}\n      >\n        Whisper\n      </Button>\n    </form>\n  )\n}\n","import firebase from 'firebase/app'\nimport 'firebase/firestore'\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAundKnFw9XrXzOhtYog1lSDuXgbm7Q4W0',\n  authDomain: 'my-secrets-jar.firebaseapp.com',\n  projectId: 'my-secrets-jar',\n  storageBucket: 'my-secrets-jar.appspot.com',\n  messagingSenderId: '319658787665',\n  appId: '1:319658787665:web:23365891300952b8eb8970',\n}\n\nfirebase.initializeApp(firebaseConfig)\n\nexport const firestore = firebase.firestore()\n\nexport default firebase\n","import { firestore } from '../../firebase/firebase.core'\n\nconst COLLECTION_NAME = 'secrets'\n\nexport const getSecretsRequest = async () => {\n  const snapshots = await firestore.collection(COLLECTION_NAME).get()\n\n  return snapshots.docs.map(doc => ({\n    id: doc.id,\n    ...doc.data(),\n  }))\n}\n\nexport const transformSecret = secret => {\n  console.log(`transforming secret`, secret)\n\n  return { ...secret, text: secret.secretText }\n}\n\nexport const addSecretRequest = async ({ secretText, author }) => {\n  const createdOn = new Date().toISOString()\n  const data = {\n    author,\n    createdOn,\n    secretText,\n  }\n\n  console.log(`adding secret to collection`, data)\n\n  const ref = await firestore.collection(COLLECTION_NAME).add(data)\n\n  return ref.id\n}\n","import compareDesc from 'date-fns/compareDesc'\nimport React, { createContext, useContext, useState, useEffect } from 'react'\n\nimport {\n  transformSecret,\n  addSecretRequest,\n  getSecretsRequest,\n} from './secrets.service'\n\nconst SecretsContext = createContext()\n\nexport const SecretsContextProvider = ({ children }) => {\n  const [secrets, setSecrets] = useState([])\n  const [inProgress, setInProgress] = useState(false)\n  const [error, setError] = useState(null)\n\n  const loadRequests = () => {\n    setInProgress(true)\n\n    return getSecretsRequest()\n      .then(loadedSecrets => loadedSecrets.map(transformSecret))\n      .then(transformedSecrets => {\n        setSecrets(transformedSecrets)\n        setInProgress(false)\n      })\n      .catch(err => {\n        console.log(`an error occurred while loading secrets`, err)\n        setError(err.toString())\n      })\n      .finally(() => {\n        setInProgress(false)\n      })\n  }\n\n  useEffect(() => {\n    loadRequests()\n  }, [])\n\n  useEffect(() => {\n    console.log(`secrets are updated. Sorting them`)\n\n    setSecrets(previousSecrets => {\n      return previousSecrets.sort(\n        ({ createdOn: createdOn1 }, { createdOn: createdOn2 }) =>\n          compareDesc(new Date(createdOn1), new Date(createdOn2)),\n      )\n    })\n  }, [secrets])\n\n  const addSecret = async secretToAdd => {\n    setInProgress(true)\n\n    try {\n      await addSecretRequest(secretToAdd)\n      await loadRequests()\n    } catch (err) {\n      console.log(`an error occurred while adding secret`, err)\n      setError(err.toString())\n    } finally {\n      setInProgress(false)\n    }\n  }\n\n  return (\n    <SecretsContext.Provider value={{ error, inProgress, secrets, addSecret }}>\n      {children}\n    </SecretsContext.Provider>\n  )\n}\n\nexport const useSecretsContext = () => useContext(SecretsContext)\n","import tw from 'twin.macro'\nimport React from 'react'\n\nimport { AppTemplate } from '../components/templates/app.template'\nimport { Container } from '../components/atoms/utility/container.component'\nimport { SecretsList } from '../components/organisms/secrets-list/secrets-list.component'\nimport { SecretForm } from '../components/organisms/secret-form/secret-form.component'\nimport { useSecretsContext } from '../services/secrets/secrets.context'\n\nexport const Secrets = () => {\n  const { inProgress, secrets, addSecret } = useSecretsContext()\n\n  const onSubmit = data => {\n    console.log(`user submitted data`)\n    console.log(data)\n\n    addSecret({\n      secretText: data.secret,\n      author: data.author,\n    }).then()\n  }\n\n  return (\n    <AppTemplate>\n      <Container override={tw`flex-col`}>\n        <div tw=\"flex justify-center items-center flex-col p-8\">\n          <h1 tw=\"font-bold text-4xl font-rubik\">What is your secret?</h1>\n          <SecretForm isSubmitting={inProgress} onSubmit={onSubmit} />\n        </div>\n\n        <div tw=\"w-full flex justify-center items-center\">\n          <SecretsList secrets={secrets} />\n        </div>\n      </Container>\n    </AppTemplate>\n  )\n}\n","import React from 'react'\nimport 'twin.macro'\n\nimport { Secrets } from './pages/secrets.page'\nimport { SecretsContextProvider } from './services/secrets/secrets.context'\n\nconst App = () => (\n  <SecretsContextProvider>\n    <Secrets />\n  </SecretsContextProvider>\n)\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport GlobalStyles from './styles/GlobalStyles'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyles />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}